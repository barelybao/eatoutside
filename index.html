<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EatOutside</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; line-height: 1.6; color: rgb(17, 25, 37); background-color: rgb(255, 209, 0); font-size: 1.5rem; }
        body.detail-active { background-color: rgb(255, 255, 255); padding-top:0;}
        h1 { font-size: 1.5rem; text-align: center; color: rgb(17, 25, 37); }
        .hidden { display: none; }
        .detail-image-container { width: 100vw; margin-left: calc(-50vw + 50%); margin-top: -20px; height: 80vh; position: relative; overflow: hidden; margin-bottom: 20px; }
        .detail-image { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; }

        /* List Screen */
        .dish-btn {
            display: flex; align-items: center; width: 100%; padding: 20px 20px 20px 0; margin-bottom: 10px;
            background: rgb(247, 248, 249); border: 2px solid rgb(255, 209, 0); border-radius: 15px;
            font-size: 1.5rem; text-align: left; cursor: pointer; color: rgb(17, 25, 37); font-weight: bold;
            height: 80px;
        }
        .dish-btn img {
            height: 80px;
            width: auto;
            object-fit: cover;
            margin-right: 15px;
            border-radius: 13px 0 0 13px;
            flex-shrink: 0;
        }
        .dish-btn-text {
            flex: 1;
        }
        .dish-btn:hover { background: rgb(255, 251, 230); border-color: rgb(255, 209, 0); }

        /* Detail Screen */
        .reassurance { font-size: 0.95rem; margin-bottom: 20px; color: rgb(17, 25, 37); text-align: left; }
        .option { margin-bottom: 15px; padding: 10px; border-radius: 15px; display: flex; flex-direction: column; }
        .option-top { display: flex; align-items: center; margin-bottom: 8px; }
        .option-icon { height: 30px; width: auto; margin-right: 8px; flex-shrink: 0; }
        .option-label { font-weight: bold; flex-shrink: 0; }
        .light { background: #fffbeb; border-left: 5px solid rgb(255, 209, 0); }
        .caution { background: #fffbeb; border-left: 5px solid rgb(255, 209, 0); }
        .avoid { background: #fffbeb; border-left: 5px solid rgb(255, 209, 0); }
        .tip { margin-top: 20px; color: rgb(17, 25, 37); border-top: 2px solid rgb(255, 209, 0); padding-top: 10px; }
        .back-btn { margin-top: 20px; width: 100%; padding: 15px; background: rgb(255, 209, 0); color: rgb(17, 25, 37); border: 2px solid rgb(255, 209, 0); border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; }
        .back-btn:hover { background: rgb(255, 223, 77); }

        /* Footer */
        footer { margin-top: 40px; text-align: center; border-top: 2px solid rgb(255, 209, 0); padding-top: 20px; }
        .info-link { color: rgb(17, 25, 37); text-decoration: underline; font-size: 0.9rem; margin: 0 10px; display: inline-block; }
        .info-link:hover { color: rgb(255, 209, 0); }
    </style>
</head>
<body>

    <div id="list-screen">
        <h1>Eating outside? (吃什么?)</h1>
        <div id="menu-container"></div>
        <footer>
            <a href="about.html" class="info-link">About</a>
            <a href="disclaimer.html" class="info-link">Disclaimer</a>
        </footer>
    </div>

    <div id="detail-screen" class="hidden">
        <div id="detail-content"></div>
        <button class="back-btn" onclick="showList()">← Back to Menu (回菜单)</button>
    </div>

    <script>
        const foods = [
            {
                id: 0, name: "Chicken Rice", tip: "Cucumber slices add a refreshing crunch to the meal.",
                options: { light: "Boiled chicken (skinless) + plain rice", caution: "Boiled chicken + flavoured rice", avoid: "Roasted chicken + flavoured rice" }
            },
            {
                id: 1, name: "Fish Soup", tip: "Clear broth is hydrating and easy on the stomach.",
                options: { light: "Sliced fish in clear broth", caution: "Fried fish in clear broth", avoid: "Fried fish in milk broth" }
            },
            {
                id: 2, name: "Yong Tau Foo", tip: "Tofu and leafy greens are soft and easy to digest.",
                options: { light: "Soup base with fresh tofu and greens", caution: "Dry style with sweet bean sauce", avoid: "Laksa broth or mostly crispy fried items" }
            },
            {
                id: 3, name: "Ban Mian", tip: "Adding extra spinach makes the broth feel more balanced.",
                options: { light: "Clear soup with extra vegetables", caution: "Dry style with minced meat", avoid: "Dry style with extra chili oil and fried ikan bilis" }
            },
            {
                id: 4, name: "Nasi Lemak", tip: "The cucumber and egg provide a nice contrast in texture.",
                options: { light: "Plain rice with ikan bilis, egg, and cucumber", caution: "Coconut rice with otah and wings", avoid: "Coconut rice with extra sambal and fried sides" }
            },
            {
                id: 5, name: "Wanton Mee", tip: "Soup on the side helps keep the noodles soft.",
                options: { light: "Soup version with boiled wantons", caution: "Dry version with char siew", avoid: "Dry version with extra sauce and fried wantons" }
            },
            {
                id: 6, name: "Carrot Cake", tip: "White carrot cake has a simpler, more savory flavor profile.",
                options: { light: "White version with more egg, less oil", caution: "White version", avoid: "Black version" }
            },
            {
                id: 7, name: "Economical Rice (Cai Fan)", tip: "Steamed options are often easier on the palate.",
                options: { light: "Two steamed vegetable sides + 1 steamed protein", caution: "One stir-fry + 1 fried protein", avoid: "Multiple fried sides or heavy gravy over rice" }
            },
            {
                id: 8, name: "Laksa", tip: "Sipping the broth slowly lets you enjoy the spices.",
                options: { light: "Extra bean sprouts", caution: "Extra cockles/fishcake", avoid: "Extra soup or added fried toppings" }
            },
            {
                id: 9, name: "Bak Chor Mee", tip: "Vinegar adds a bright tang that cuts through the richness.",
                options: { light: "Soup version with minced meat and mushrooms", caution: "Dry version with balanced sauce", avoid: "Dry version with extra lard/chili/sauce" }
            }
        ];

        function showList() {
            document.getElementById('list-screen').classList.remove('hidden');
            document.getElementById('detail-screen').classList.add('hidden');
            document.body.classList.remove('detail-active');
        }

        function showDetail(id) {
            const food = foods[id];
            const content = `
                <div class="detail-image-container">
                    <img src="./assets/img/food/${getKebabCase(food.name)}.webp" alt="${food.name}" class="detail-image">
                </div>
                <div>
                    <h2 style="margin-bottom:0">${food.name}</h2>
                </div>
                <p class="reassurance">Choose the option that feels safest for your body today.</p>
                <div class="option light">
                    <div class="option-top">
                        <img src="./assets/img/ui/light.svg" alt="Light option" class="option-icon">
                        <span class="option-label">Light:</span>
                    </div>
                    <div class="option-content">${food.options.light}</div>
                </div>
                <div class="option caution">
                    <div class="option-top">
                        <img src="./assets/img/ui/caution.svg" alt="Caution option" class="option-icon">
                        <span class="option-label">Caution:</span>
                    </div>
                    <div class="option-content">${food.options.caution}</div>
                </div>
                <div class="option avoid">
                    <div class="option-top">
                        <img src="./assets/img/ui/avoid.svg" alt="Avoid option" class="option-icon">
                        <span class="option-label">Avoid:</span>
                    </div>
                    <div class="option-content">${food.options.avoid}</div>
                </div>
                <p class="tip">${food.tip}</p>
            `;
            document.getElementById('detail-content').innerHTML = content;
            document.getElementById('list-screen').classList.add('hidden');
            document.getElementById('detail-screen').classList.remove('hidden');
            document.body.classList.add('detail-active');
            window.scrollTo(0,0);
        }

        function getKebabCase(name) {
            return name.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-').replace(/\([^)]*\)/g, '').trim();
        }

        const container = document.getElementById('menu-container');
        foods.forEach(f => {
            const btn = document.createElement('button');
            btn.className = 'dish-btn';

            const img = document.createElement('img');
            img.src = `./assets/img/food/${getKebabCase(f.name)}.webp`;
            img.alt = f.name;

            const textSpan = document.createElement('span');
            textSpan.className = 'dish-btn-text';
            textSpan.innerText = f.name;

            btn.appendChild(img);
            btn.appendChild(textSpan);
            btn.onclick = () => showDetail(f.id);
            container.appendChild(btn);
        });
    </script>
</body>
</html>